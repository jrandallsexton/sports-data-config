apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard
spec:
  interval: 30m
  chart:
    spec:
      chart: kubernetes-dashboard
      version: '7.x'
      sourceRef:
        kind: HelmRepository
        name: kubernetes-dashboard
        namespace: flux-system
      interval: 12h
  values:
    # Resource limits
    resources:
      requests:
        cpu: 10m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi
    
    # Metrics scraper sidecar
    metricsScraper:
      enabled: true
      resources:
        requests:
          cpu: 5m
          memory: 32Mi
        limits:
          cpu: 50m
          memory: 64Mi
    
    # Service configuration
    service:
      type: ClusterIP
      externalPort: 443
    
    # Ingress configuration for Traefik
    ingress:
      enabled: true
      className: traefik
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: web
      hosts:
        - host: 192.168.0.112
          paths:
            - path: /k8s-dashboard
              pathType: Prefix
      tls: []
    
    # Settings
    settings:
      clusterName: "home-cluster"
      itemsPerPage: 20
      logsAutoRefreshTimeInterval: 5
      resourceAutoRefreshTimeInterval: 5
    
    # Enable service account creation
    serviceAccount:
      create: true
      name: kubernetes-dashboard
